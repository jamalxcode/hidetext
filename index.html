<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Secret Text - Hide Secret Messages</title>
    <meta name="description" content="Hide secret messages inside emoji using invisible Unicode variation selectors. Encode and decode text with this steganography tool.">
    <style>
        :root {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --surface: 217.2 32.6% 17.5%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --border: 217.2 32.6% 17.5%;
            --primary: 142.1 76.2% 36.3%;
            --primary-foreground: 355.7 100% 97.3%;
            --cyber-glow: 142.1 76.2% 36.3%;
            --cyber-green: 142.1 76.2% 36.3%;
            --cyber-blue: 217.2 91.2% 59.8%;
            --gradient-primary: linear-gradient(135deg, hsl(142.1 76.2% 36.3%), hsl(142.1 76.2% 46.3%));
            --gradient-surface: linear-gradient(135deg, hsl(217.2 32.6% 17.5%), hsl(217.2 32.6% 15.5%));
            --gradient-glow: linear-gradient(135deg, hsl(217.2 32.6% 19.5%), hsl(217.2 32.6% 17.5%));
            --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 20px hsl(142.1 76.2% 36.3% / 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, hsl(var(--background)), hsl(var(--surface)), hsl(var(--background)));
            color: hsl(var(--foreground));
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .header .subtitle {
            font-size: 1.25rem;
            font-weight: 500;
            color: hsl(var(--muted-foreground));
            margin-bottom: 4px;
        }

        .header .description {
            font-size: 1.125rem;
            color: hsl(var(--muted-foreground));
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 32px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--gradient-surface);
            border: 1px solid hsl(var(--border) / 0.5);
            border-radius: 12px;
            padding: 24px;
            box-shadow: var(--shadow-card);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
        }

        .card-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .icon-encode {
            color: hsl(var(--cyber-glow));
        }

        .icon-decode {
            color: hsl(var(--cyber-green));
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin-bottom: 24px;
            padding: 16px;
            background: hsl(var(--surface));
            border-radius: 8px;
            border: 1px solid hsl(var(--border) / 0.5);
        }

        .emoji-btn {
            background: transparent;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 8px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-btn:hover {
            background: hsl(var(--muted) / 0.5);
            border-color: hsl(var(--border));
        }

        .emoji-btn.selected {
            border-color: hsl(var(--primary));
            background: hsl(var(--primary) / 0.1);
            box-shadow: 0 0 10px hsl(var(--primary) / 0.3);
        }

        .form-group {
            margin-bottom: 24px;
        }

        .label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .textarea,
        .input {
            width: 100%;
            padding: 12px;
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border) / 0.5);
            border-radius: 6px;
            color: hsl(var(--foreground));
            font-family: inherit;
            resize: vertical;
        }

        .textarea {
            min-height: 100px;
        }

        .textarea:focus,
        .input:focus {
            outline: none;
            border-color: hsl(var(--primary));
            box-shadow: 0 0 0 2px hsl(var(--primary) / 0.2);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn {
            padding: 10px 16px;
            border-radius: 6px;
            border: 1px solid transparent;
            background: hsl(var(--muted));
            color: hsl(var(--foreground));
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            text-decoration: none;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: hsl(var(--primary-foreground));
        }

        .btn-primary:hover {
            box-shadow: var(--shadow-glow);
        }

        .btn-outline {
            background: transparent;
            border-color: hsl(var(--border));
        }

        .btn-outline:hover {
            background: hsl(var(--muted) / 0.5);
        }

        .btn-ghost {
            background: transparent;
            color: hsl(var(--muted-foreground));
        }

        .btn-ghost:hover {
            background: hsl(var(--muted) / 0.5);
            color: hsl(var(--foreground));
        }

        .btn-decode {
            border-color: hsl(var(--cyber-green));
            color: hsl(var(--cyber-green));
        }

        .btn-decode:hover {
            background: hsl(var(--cyber-green) / 0.1);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.75rem;
        }

        .result-card {
            background: var(--gradient-glow);
            border: 1px solid hsl(var(--border) / 0.3);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .result-input {
            font-family: 'Courier New', monospace;
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border) / 0.5);
        }

        .bytes-info {
            color: hsl(var(--cyber-green));
            font-size: 0.875rem;
            margin-top: 8px;
        }

        .debug-info {
            margin-top: 16px;
            font-size: 0.75rem;
        }

        .debug-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: hsl(var(--cyber-blue));
            margin-bottom: 4px;
        }

        .debug-line {
            color: hsl(var(--muted-foreground));
            font-family: 'Courier New', monospace;
            padding-left: 20px;
            margin-bottom: 2px;
        }

        .decoded-message {
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border) / 0.5);
            border-radius: 6px;
            padding: 12px;
            font-family: 'Courier New', monospace;
            color: hsl(var(--cyber-green));
        }

        .help-section {
            background: var(--gradient-surface);
            border: 1px solid hsl(var(--border) / 0.5);
            border-radius: 12px;
            padding: 24px;
            box-shadow: var(--shadow-card);
        }

        .help-section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-section p {
            color: hsl(var(--muted-foreground));
            margin-bottom: 16px;
        }

        .help-section ul {
            color: hsl(var(--muted-foreground));
            margin-left: 20px;
        }

        .help-section li {
            margin-bottom: 8px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border));
            border-radius: 8px;
            padding: 16px;
            box-shadow: var(--shadow-card);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            border-color: #ef4444;
            background: hsl(var(--surface));
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .toast-description {
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
        }

        .ml-auto {
            margin-left: auto;
        }

        .hidden {
            display: none;
        }

        .icon-sm {
            width: 16px;
            height: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Emoji Secret Text</h1>
            <p class="subtitle">secret.sala.company</p>
            <p class="description">Hide secret messages inside emoji using invisible Unicode variation selectors</p>
        </div>

        <!-- Main Grid -->
        <div class="grid">
            <!-- Encode Pane -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon icon-encode" viewBox="0 0 24 24">
                        <polygon points="13,2 3,14 12,14 11,22 21,10 12,10"></polygon>
                    </svg>
                    <h2>Encode</h2>
                </div>

                <div class="form-group">
                    <label class="label">Choose Carrier Emoji</label>
                    <div class="emoji-grid" id="emojiGrid"></div>
                </div>

                <div class="form-group">
                    <label class="label">Secret Message</label>
                    <textarea 
                        id="secretMessage" 
                        class="textarea" 
                        placeholder="Enter your secret message here..."
                    ></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="handleEncode()">
                        <svg class="icon icon-sm" viewBox="0 0 24 24">
                            <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                        </svg>
                        Encode
                    </button>
                    <button class="btn btn-outline" onclick="clearEncode()">Clear</button>
                    <button class="btn btn-ghost btn-sm ml-auto" onclick="toggleDebug()">
                        <svg class="icon icon-sm" viewBox="0 0 24 24" id="debugIcon">
                            <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <span id="debugText">Show Debug</span>
                    </button>
                </div>

                <div id="encodedResult" class="result-card hidden">
                    <div class="result-header">
                        <label class="label">Emoji with Hidden Data</label>
                        <button class="btn btn-ghost btn-sm" onclick="copyResult()">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
                            </svg>
                        </button>
                    </div>
                    <input id="encodedEmoji" class="input result-input" readonly>
                    <p id="bytesInfo" class="bytes-info"></p>
                    <div id="debugInfo" class="debug-info hidden">
                        <div class="debug-header">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <polyline points="16,18 22,12 16,6"></polyline>
                                <polyline points="8,6 2,12 8,18"></polyline>
                            </svg>
                            Debug Info:
                        </div>
                        <div id="debugLines"></div>
                    </div>
                </div>
            </div>

            <!-- Decode Pane -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon icon-decode" viewBox="0 0 24 24">
                        <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <h2>Decode</h2>
                </div>

                <div class="form-group">
                    <label class="label">Paste Emoji with Hidden Data</label>
                    <textarea 
                        id="inputToDecode" 
                        class="textarea" 
                        placeholder="Paste the emoji with hidden message here..."
                    ></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-decode" onclick="handleDecode()">
                        <svg class="icon icon-sm" viewBox="0 0 24 24">
                            <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        Decode
                    </button>
                    <button class="btn btn-ghost" onclick="clearDecode()">Clear</button>
                </div>

                <div id="decodedResult" class="result-card hidden">
                    <label class="label">Decoded Message</label>
                    <div id="decodedMessage" class="decoded-message"></div>
                </div>
            </div>
        </div>

        <!-- Help Section -->
        <div class="help-section">
            <h3>
                <svg class="icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <path d="M12 17h.01"></path>
                </svg>
                How it Works
            </h3>
            <p>This tool uses Unicode variation selectors to hide text data within emoji characters:</p>
            <ul>
                <li><strong>Encoding:</strong> Converts your message to UTF-8 bytes, then maps each byte to invisible Unicode variation selectors that are appended to the carrier emoji.</li>
                <li><strong>Decoding:</strong> Extracts the variation selectors from the emoji and converts them back to the original message.</li>
                <li><strong>Invisible:</strong> The hidden data appears as a normal emoji in most applications, making it perfect for covert communication.</li>
                <li><strong>Compatible:</strong> Works across different platforms and messaging apps that support Unicode.</li>
            </ul>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast" class="toast">
        <div id="toastTitle" class="toast-title"></div>
        <div id="toastDescription" class="toast-description"></div>
    </div>

    <script>
        // Common emojis for encoding
        const COMMON_EMOJIS = [
            'ðŸ˜€', 'ðŸ˜', 'ðŸ”¥', 'â¤ï¸', 'ðŸ‘', 'ðŸ˜‚', 'ðŸŽ‰', 'âœ¨',
            'ðŸ’¯', 'ðŸš€', 'â­', 'ðŸŒŸ', 'ðŸ’Ž', 'ðŸŽ¨', 'ðŸŽµ', 'ðŸ“±',
            'ðŸ’»', 'ðŸŒˆ', 'â˜€ï¸', 'ðŸŒ™', 'âš¡', 'ðŸ”®', 'ðŸŽ¯', 'ðŸ†'
        ];

        let selectedEmoji = 'ðŸ˜€';
        let debugMode = false;

        // Initialize emoji picker
        function initializeEmojiPicker() {
            const emojiGrid = document.getElementById('emojiGrid');
            COMMON_EMOJIS.forEach(emoji => {
                const button = document.createElement('button');
                button.className = `emoji-btn ${emoji === selectedEmoji ? 'selected' : ''}`;
                button.textContent = emoji;
                button.onclick = () => selectEmoji(emoji);
                emojiGrid.appendChild(button);
            });
        }

        function selectEmoji(emoji) {
            selectedEmoji = emoji;
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.textContent === emoji);
            });
        }

        // Encoding algorithm
        function encodeMessage(message, baseEmoji) {
            const utf8Bytes = new TextEncoder().encode(message);
            const selectors = [];
            const debugInfo = [];

            for (const byte of utf8Bytes) {
                let selector;
                if (byte <= 15) {
                    selector = 0xFE00 + byte; // U+FE00..U+FE0F
                } else {
                    selector = 0xE0100 + (byte - 16); // U+E0100..U+E01EF
                }
                selectors.push(selector);
                debugInfo.push(`Byte ${byte} â†’ U+${selector.toString(16).toUpperCase()}`);
            }

            const selectorString = selectors.map(s => String.fromCodePoint(s)).join('');
            const result = baseEmoji + selectorString;

            return {
                encodedEmoji: result,
                bytes: utf8Bytes.length,
                debugInfo: debugMode ? debugInfo : undefined
            };
        }

        // Decoding algorithm
        function decodeMessage(input) {
            const codePoints = Array.from(input).map(char => char.codePointAt(0));
            
            // Find the base emoji (first non-ASCII character before selectors)
            let baseIndex = -1;
            for (let i = 0; i < codePoints.length; i++) {
                if (codePoints[i] > 127) {
                    baseIndex = i;
                    break;
                }
            }

            if (baseIndex === -1) return '';

            // Extract variation selectors after the base emoji
            const selectors = codePoints.slice(baseIndex + 1);
            if (selectors.length === 0) return '';

            const bytes = [];
            for (const selector of selectors) {
                let byte;
                if (selector >= 0xFE00 && selector <= 0xFE0F) {
                    byte = selector - 0xFE00;
                } else if (selector >= 0xE0100 && selector <= 0xE01EF) {
                    byte = (selector - 0xE0100) + 16;
                } else {
                    continue; // Skip invalid selectors
                }
                bytes.push(byte);
            }

            if (bytes.length === 0) return '';

            try {
                const uint8Array = new Uint8Array(bytes);
                return new TextDecoder('utf-8', { fatal: true }).decode(uint8Array);
            } catch {
                return '';
            }
        }

        function handleEncode() {
            const message = document.getElementById('secretMessage').value;
            
            if (!message.trim()) {
                showToast('No message to encode', 'Please enter a secret message first.', 'error');
                return;
            }

            if (message.length > 10000) {
                showToast('Message too long', 'Message may be too long for stable transfer.', 'error');
            }

            const result = encodeMessage(message, selectedEmoji);
            
            document.getElementById('encodedEmoji').value = result.encodedEmoji;
            document.getElementById('bytesInfo').textContent = `${result.bytes} bytes hidden`;
            
            if (result.debugInfo) {
                const debugLines = document.getElementById('debugLines');
                debugLines.innerHTML = result.debugInfo.map(info => 
                    `<div class="debug-line">${info}</div>`
                ).join('');
                document.getElementById('debugInfo').classList.remove('hidden');
            }
            
            document.getElementById('encodedResult').classList.remove('hidden');
            showToast('Message encoded!', `Hidden ${result.bytes} bytes in emoji.`);
        }

        function handleDecode() {
            const input = document.getElementById('inputToDecode').value;
            
            if (!input.trim()) {
                showToast('No input to decode', 'Please paste emoji with hidden data first.', 'error');
                return;
            }

            const decoded = decodeMessage(input);
            
            if (decoded) {
                document.getElementById('decodedMessage').textContent = decoded;
                document.getElementById('decodedResult').classList.remove('hidden');
                showToast('Message decoded!', 'Successfully extracted hidden message.');
            } else {
                document.getElementById('decodedResult').classList.add('hidden');
                showToast('No hidden data found', 'No hidden data detected in the input.', 'error');
            }
        }

        function copyResult() {
            const encodedEmoji = document.getElementById('encodedEmoji').value;
            navigator.clipboard.writeText(encodedEmoji).then(() => {
                showToast('Copied!', 'Encoded result copied to clipboard.');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = encodedEmoji;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('Copied!', 'Encoded result copied to clipboard.');
            });
        }

        function clearEncode() {
            document.getElementById('secretMessage').value = '';
            document.getElementById('encodedResult').classList.add('hidden');
        }

        function clearDecode() {
            document.getElementById('inputToDecode').value = '';
            document.getElementById('decodedResult').classList.add('hidden');
        }

        function toggleDebug() {
            debugMode = !debugMode;
            const debugText = document.getElementById('debugText');
            const debugIcon = document.getElementById('debugIcon');
            
            if (debugMode) {
                debugText.textContent = 'Hide Debug';
                debugIcon.innerHTML = '<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path><path d="m10.73 5.08-1.39 1.39a3 3 0 0 0-1.85 2.53h-.75a4.5 4.5 0 0 1 3.99-3.92Z"></path><path d="m2 2 20 20"></path>';
            } else {
                debugText.textContent = 'Show Debug';
                debugIcon.innerHTML = '<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle>';
                document.getElementById('debugInfo').classList.add('hidden');
            }
        }

        function showToast(title, description, type = 'success') {
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toastTitle');
            const toastDescription = document.getElementById('toastDescription');
            
            toastTitle.textContent = title;
            toastDescription.textContent = description;
            
            toast.className = `toast ${type === 'error' ? 'error' : ''}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeEmojiPicker);
    </script>
</body>
</html>
